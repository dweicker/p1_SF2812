\subsection{Presentation of the problem}
In this section, we are going to generalize the model a little bit. Up to this point, we have considered that each link has a known capacity and that this quantity is exact. This is, however, not true in general. We can expect the actual capacities to be close to the numbers given but we should take into account that they can fluctuate around those values. Our new model will thus have to deal with this uncertainty. Because the value of the capacities can be considered as an unknown parameter, we will use stochastic programming.

We also know that the 50 Gbit/s-demand can be rerouted after the actual values are known but the 40 Gbit/s-demand must be determined on beforehand (and thus not cannot be rerouted after knowing the actual capacities).

\subsection{Mathematical model}
Just as in the previous models, we introduce the set $I$ :
$$I = \{ Sto,Lon,Ber,War,Par,Rom,Mad\}$$

The main difference with previous models is the presence of uncertainty. As usual, we will handle this by discretizing this uncertainty into different scenarios $s$ with an associated probability $p_s$. Each scenario corresponds to a complete set of known capacities. We can for example say that the second scenario is the one where the capacities are exactly those given. Let us assume that we have $S$ scenarios and define the parameters : 
\begin{align*}
&c_{i,j,s} &\text{capacity in scenario $s$ from city $i$ to $j$} \\
& &i,j \in I \text{ and } s=1,...S
\end{align*}

Let us also introduce the variables $x$, depicting the 40 Gbit/s-flow. Because this flow must be determined on beforehand, it cannot depend on the scenarios.
\begin{align*}
&x_{i,j} &\text{flow in Gbit/s going from $i$ to $j$ for the 40 Gbit/s-flow}\\
& &i,j \in I
\end{align*}

All $x$ are positive. Similarly, let us define the variables $y$ for the 50 Gbit/s-flow. This can be rerouted and thus we could potentially have different flows for different scenarios.
\begin{align*}
&y_{i,j,s} &\text{flow in Gbit/s going from $i$ to $j$ for the 50 Gbit/s-flow and scenario $s$}\\
& &i,j \in I \text{ and } s=1,...,S
\end{align*}

Here also, all $y$ are positive. Just as previously, the first constraint to think about is the conservation of flow. If we think about London as a source and Warsaw as a sink, we have, for the 40 Gbit/s-flow : 
$$\sum_{j\in I} x_{i,j} - \sum_{j\in I}x_{j,i} = b_i = \begin{bmatrix}
  b_{Sto}\\
  b_{Ber}\\
  b_{War}\\
  b_{Lon}\\
  b_{Par}\\
  b_{Mad}\\
  b_{Rom}
 \end{bmatrix} =
 \begin{bmatrix}
  0\\
  0\\
  -40\\
  40\\
  0\\
  0\\
  0
 \end{bmatrix}$$
 
 This must hold for every scenario since we cannot reroute this traffic. Concerning the 50 Gbit/s-flow, the conservation equation is given by : 
 $$\sum_{j\in I} y_{i,j,s} - \sum_{j\in I}y_{j,i,s} = a_i = \begin{bmatrix}
  a_{Sto}\\
  a_{Ber}\\
  a_{War}\\
  a_{Lon}\\
  a_{Par}\\
  a_{Mad}\\
  a_{Rom}
 \end{bmatrix} =
 \begin{bmatrix}
  -50\\
  0\\
  0\\
  0\\
  0\\
  0\\
  50
 \end{bmatrix}$$
 
 The other constraint is that the amount of flow cannot exceed the capacity. As stated above, we have a given capacity for each scenario. 
 
 $$x_{i,j}+x_{j,i}+y_{i,j,s}+y_{j,i,s} \leq c_{i,j,s}$$
 
 This equation must hold for every $i,j \in I$ and every scenario $s=1,...,S$ because we do not want to find ourselves in a position where we cannot route the traffic.



 